# Деплой смарт-контракта MedJournal

## Подготовка

1. **Откройте Remix IDE**: https://remix.ethereum.org/
2. **Создайте новый файл** `MedJournal.sol` и скопируйте туда код контракта

## Настройка MetaMask

1. **Убедитесь что подключена сеть Sepolia**:
   - Network Name: Sepolia test network
   - New RPC URL: https://sepolia.infura.io/v3/
   - Chain ID: 11155111
   - Currency Symbol: ETH
   - Block Explorer: https://sepolia.etherscan.io/

2. **Проверьте баланс** - должно быть минимум 0.01 ETH для деплоя

## Деплой через Remix

1. **Скомпилируйте контракт**:
   - Выберите компилятор версии 0.8.19 или выше
   - Нажмите "Compile MedJournal.sol"

2. **Деплойте контракт**:
   - Перейдите на вкладку "Deploy & Run Transactions"
   - Environment: "Injected Provider - MetaMask"
   - Выберите ваш аккаунт
   - Выберите контракт "MedJournal"
   - Нажмите "Deploy"
   - Подтвердите транзакцию в MetaMask

3. **Сохраните адрес контракта** - он понадобится для интеграции

## Интеграция с фронтендом

После деплоя нужно будет:

1. **Обновить useWallet.ts** - добавить взаимодействие с контрактом
2. **Добавить ABI контракта** в проект
3. **Обновить функцию signAndSubmitHash** для работы с реальным контрактом

## Стоимость операций

- **Деплой контракта**: ~0.005-0.01 ETH
- **Запись entry**: ~0.001-0.003 ETH
- **Чтение данных**: бесплатно (view функции)

## Безопасность

- ✅ Контракт проверяет уникальность хэшей
- ✅ Только владелец может записывать свои данные
- ✅ Все записи неизменяемы после создания
- ✅ Временные метки автоматические и защищенные

## Функции контракта

- `recordEntry(bytes32 _dataHash, string _ipfsHash)` - записать новую запись
- `getUserEntries(address _user)` - получить все записи пользователя
- `verifyEntry(bytes32 _dataHash)` - проверить существование записи
- `entryExists(bytes32 _dataHash)` - быстрая проверка существования